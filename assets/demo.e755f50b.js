import{z as ne,A as re,B as T,E as se}from"./index.c7d67714.js";import{a as de,r as s,A as ie,l as W,P as me,c as d,o as B,i as pe,h as z,f as u,w as a,g as t,p as E,e as k,k as c,t as R,q as A,J as Fe,E as $}from"./index.349d9e8e.js";const fe={class:"taskManager page-container"},ce={class:"tableContainer"},ge=c(" \u65B0\u589E "),_e={class:"dialog-footer"},be=c("\u53D6\u6D88"),ye=c("\u786E\u8BA4"),ve=c("\u7F16\u8F91"),Ce=c("\u5220\u9664 "),he={class:"dialog-footer"},we=c("\u53D6\u6D88"),Be=c("\u786E\u8BA4 "),ke=de({props:{tableData:{type:Array,default:function(){return[]}},tableHeader:{type:Array,default:function(){return[]}},isOperate:{type:Boolean,default:function(){return!1}},operateWidth:{type:Number,default:()=>200},total:{type:Number,required:!0,default:0},pageSizesArr:{type:Array,default(){return[2,5,10,20]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"}},emits:["handleSizeChange","handleCurrentChange","handleChangeSwitchStatus"],setup(S,{emit:De}){const O=S;let U=s(),C=s(),g=s(!1),_=s(!1),h=s(160),P=s(160),j=s(!0),b=s(5),y=s(1),q=s(),M=s([]);function I(o){let e=new Date(o);console.log(e);let n=e.getFullYear(),F=e.getMonth()+1;F=F<10?"0"+F:F;let p=e.getDate();p=p<10?"0"+p:p;let v=e.getHours();v=v<10?"0"+v:v;let m=e.getMinutes();m=m<10?"0"+m:m;let f=e.getSeconds();return f=f<10?"0"+f:f,n+"-"+F+"-"+p+" "+v+":"+m+":"+f}let w=async(o,e)=>{let n=await ne(o,e);console.log(n),M.value=n.data.data};w(y.value,b.value);const J=ie(()=>M.value.filter(o=>!C.value||o.name.toLowerCase().includes(C.value.toLowerCase())));let D=async()=>{let o=await re();q.value=o.data.data.num};D(),W([{prop:"name",label:"\u4F20\u611F\u5668\u540D\u79F0",overHidden:!0,sortable:!0},{prop:"number",label:"\u4F20\u611F\u5668\u7F16\u7801",overHidden:!0,sortable:!0},{prop:"time",label:"\u63D0\u4EA4\u65F6\u95F4",sortable:!0,align:"left",width:"220px"}]);const Y=W({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F20\u611F\u5668\u540D\u79F0",trigger:"change"}],number:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F20\u611F\u5668\u7F16\u7801",trigger:"change"}],type:[{required:!0,message:"\u8BF7\u9009\u62E9\u4F20\u611F\u5668\u7C7B\u578B",trigger:"change"}]}),G=o=>{b.value=o,w(y.value,b.value)},K=o=>{y.value=o,w(y.value,b.value)};let r=s({name:"",number:"",type:null}),Q=async o=>{console.log(o),o&&await o.validate(async(e,n)=>{if(e){console.log("submit!"),g.value=!1;let F=await T(r.value);console.log(F),w(y.value,b.value),D(),r.value.name="",r.value.number="",r.value.type=null}else console.log("error submit!",n)})},X=()=>{g.value=!1,r.value.name="",r.value.type=null},i=s({name:"",number:"",type:null});const Z=(o,e)=>{console.log(" index\u{1F680}",o),console.log(" row\u{1F680}",e),_.value=!0,i.value=e};let ee=async()=>{_.value=!1,console.log(i.value);let o=await T(i.value);console.log(o),w(y.value,b.value),D(),i.value.name="",i.value.type=null},le=()=>{_.value=!1};const ue=async(o,e)=>{console.log(" index\u{1F680}",o),console.log(" row\u{1F680}",e),Fe.confirm("\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u6761\u6570\u636E\u5417?","Warning",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{let n=await se(e.id);console.log(n),w(y.value,b.value),D(),$({type:"success",message:"\u5220\u9664\u6210\u529F"})}).catch(()=>{$({type:"info",message:"\u53D6\u6D88\u5220\u9664"})})};return me(()=>{console.log("\uFF01\u8FD9\u91CC\u8F93\u51FA\u{1F602}\u{1F468}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FC}==>\uFF1A ",O.tableData)}),(o,e)=>{const n=d("el-button"),F=d("el-col"),p=d("el-input"),v=d("el-row"),m=d("el-form-item"),f=d("el-option"),N=d("el-select"),H=d("el-form"),L=d("el-dialog"),x=d("el-tag"),V=d("el-table-column"),te=d("el-table"),ae=d("el-pagination");return B(),pe("div",fe,[z("div",ce,[u(v,{gutter:20},{default:a(()=>[u(F,{span:16},{default:a(()=>[u(n,{onClick:e[0]||(e[0]=l=>E(g)?g.value=!0:g=!0),type:"default",style:{"background-color":"#fb808b",color:"#f0f0f0",margin:"10px 0"}},{default:a(()=>[ge]),_:1})]),_:1}),u(F,{span:8,style:{"margin-top":"10px"}},{default:a(()=>[u(p,{style:{width:"374px","margin-left":"30px"},modelValue:t(C),"onUpdate:modelValue":e[1]||(e[1]=l=>E(C)?C.value=l:C=l),placeholder:"\u8BF7\u8F93\u5165\u8981\u641C\u7D22\u7684\u5185\u5BB9"},null,8,["modelValue"])]),_:1})]),_:1}),u(L,{modelValue:t(g),"onUpdate:modelValue":e[6]||(e[6]=l=>E(g)?g.value=l:g=l),title:"\u65B0\u589E\u4F20\u611F\u5668\u4FE1\u606F"},{footer:a(()=>[z("span",_e,[u(n,{onClick:t(X)},{default:a(()=>[be]),_:1},8,["onClick"]),u(n,{style:{"--el-color-primary":"#fb808b"},type:"primary",onClick:e[5]||(e[5]=l=>t(Q)(t(U)))},{default:a(()=>[ye]),_:1})])]),default:a(()=>[u(H,{model:t(r),rules:t(Y),ref_key:"ruleFormRef",ref:U},{default:a(()=>[u(m,{label:"\u4F20\u611F\u5668\u540D\u5B57","label-width":t(h),prop:"name"},{default:a(()=>[u(p,{modelValue:t(r).name,"onUpdate:modelValue":e[2]||(e[2]=l=>t(r).name=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),u(m,{label:"\u4F20\u611F\u5668\u7F16\u7801","label-width":t(h),prop:"number"},{default:a(()=>[u(p,{modelValue:t(r).number,"onUpdate:modelValue":e[3]||(e[3]=l=>t(r).number=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),u(m,{label:"\u4F20\u611F\u5668\u7C7B\u578B","label-width":t(h),prop:"type"},{default:a(()=>[u(N,{modelValue:t(r).type,"onUpdate:modelValue":e[4]||(e[4]=l=>t(r).type=l),placeholder:"\u8BF7\u9009\u62E9\u4F20\u611F\u5668\u7C7B\u578B"},{default:a(()=>[u(f,{label:"\u4EBA\u4F53\u611F\u5E94\u4F20\u611F\u5668",value:"1"}),u(f,{label:"\u7167\u5EA6\u4F20\u611F\u5668",value:"2"})]),_:1},8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),u(te,{data:t(J),height:"400",style:{width:"100%"},border:""},{default:a(()=>[u(V,{prop:"name",label:"\u4F20\u611F\u5668\u540D\u79F0"},{default:a(l=>[l.row.name?(B(),k(x,{key:0,class:"ml-2",type:"danger"},{default:a(()=>[c(R(l.row.name),1)]),_:2},1024)):A("",!0)]),_:1}),u(V,{prop:"number",label:"\u4F20\u611F\u5668\u7F16\u7801"},{default:a(l=>[l.row.name?(B(),k(x,{key:0,class:"ml-2",type:"danger"},{default:a(()=>[c(R(l.row.number),1)]),_:2},1024)):A("",!0)]),_:1}),u(V,{prop:"time",label:"\u63D0\u4EA4\u65F6\u95F4"},{default:a(l=>[l.row.name?(B(),k(x,{key:0,class:"ml-2",type:"danger"},{default:a(()=>[c(R(I(parseInt(l.row.time))),1)]),_:2},1024)):A("",!0)]),_:1}),t(j)?(B(),k(V,{key:0,fixed:"right",label:"\u64CD\u4F5C\u5217",width:t(P)},{default:a(l=>[u(n,{size:"small",onClick:oe=>Z(l.$index,l.row)},{default:a(()=>[ve]),_:2},1032,["onClick"]),u(n,{size:"small",type:"danger",onClick:oe=>ue(l.$index,l.row)},{default:a(()=>[Ce]),_:2},1032,["onClick"])]),_:1},8,["width"])):A("",!0)]),_:1},8,["data"]),u(L,{modelValue:t(_),"onUpdate:modelValue":e[10]||(e[10]=l=>E(_)?_.value=l:_=l),title:"\u7F16\u8F91\u4F20\u611F\u5668\u4FE1\u606F"},{footer:a(()=>[z("span",he,[u(n,{onClick:t(le)},{default:a(()=>[we]),_:1},8,["onClick"]),u(n,{style:{"--el-color-primary":"#fb808b"},type:"primary",onClick:t(ee)},{default:a(()=>[Be]),_:1},8,["onClick"])])]),default:a(()=>[u(H,{model:t(i)},{default:a(()=>[u(m,{label:"\u4F20\u611F\u5668\u540D\u5B57","label-width":t(h)},{default:a(()=>[u(p,{modelValue:t(i).name,"onUpdate:modelValue":e[7]||(e[7]=l=>t(i).name=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),u(m,{label:"\u4F20\u611F\u5668\u7F16\u7801","label-width":t(h)},{default:a(()=>[u(p,{modelValue:t(i).number,"onUpdate:modelValue":e[8]||(e[8]=l=>t(i).number=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),u(m,{label:"\u4F20\u611F\u5668\u7C7B\u578B","label-width":t(h)},{default:a(()=>[u(N,{modelValue:t(i).type,"onUpdate:modelValue":e[9]||(e[9]=l=>t(i).type=l),placeholder:"\u8BF7\u9009\u62E9\u4F20\u611F\u5668\u7C7B\u578B"},{default:a(()=>[u(f,{label:"\u4EBA\u4F53\u611F\u5E94\u4F20\u611F\u5668",value:"1"}),u(f,{label:"\u7167\u5EA6\u4F20\u611F\u5668",value:"2"})]),_:1},8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),u(ae,{style:{"--el-color-primary":"#fb808b"},class:"Pagination",background:"","page-sizes":S.pageSizesArr,layout:S.layout,total:t(q),onSizeChange:G,onCurrentChange:K},null,8,["page-sizes","layout","total"])])])}}});export{ke as default};
