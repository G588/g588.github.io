import{a as Z,a8 as ee,a9 as ue,aa as le,ab as te}from"./index.c7d67714.js";import{_ as ae,a as oe,r as m,l as se,c as d,o as c,i as D,h as V,f as u,g as a,w as o,p as re,k as _,t as q,F as T,j as R,e as y,q as U,E as B,J as ne}from"./index.349d9e8e.js";const de={class:"taskManager page-container"},ie={class:"tableContainer"},pe=_(" \u65B0\u589E "),me=_(" \u7F16\u8F91 "),_e=_(" \u5220\u9664 "),ce={class:"Pagination"},Fe={class:"dialog-footer"},fe=_("\u786E\u8BA4"),ge=_("\u91CD\u7F6E"),be=_("\u53D6\u6D88"),ve=oe({setup(ye){let k=m();function b(s=1,e=10){ee(s,e).then(n=>{console.log(n),k.value=n.data.data.list,console.log(k.value)})}b(),m(!1);let p=m(!1);const z=m("default"),F=m();let t=m({id:"",name:"",start_day:"",end_day:"",start_time:"",control_id:[],code:"",code_name:"",transfer:"",run:"",remarks:"",controlArea:""});const N=se({name:[{required:!0,message:"\u8BF7\u586B\u5199\u4EFB\u52A1\u540D\u79F0",trigger:"change"}],code:[{required:!0,message:"\u8BF7\u586B\u5199\u6307\u4EE4",trigger:"change"}],count:[{required:!0,message:"\u8BF7\u586B\u5199\u6307\u4EE4",trigger:"change"}],startDate:[{type:"date",required:!0,message:"\u8BF7\u586B\u5199\u5F00\u59CB\u65E5\u671F",trigger:"change"}],startTime:[{type:"date",required:!0,message:"\u8BF7\u586B\u5199\u5F00\u59CB\u65F6\u95F4",trigger:"change"}],endDate:[{type:"date",required:!0,message:"\u8BF7\u586B\u5199\u7ED3\u675F\u65E5\u671F",trigger:"change"}],remarks:[{message:"\u8BF7\u586B\u5199\u5907\u6CE8\u5185\u5BB9",trigger:"change"}],run:[{required:!0,message:"\u662F\u5426\u5F00\u542F\u4EFB\u52A1",trigger:"change"}],transfer:[{required:!0,message:"\u8BF7\u8FDB\u884C\u8C03\u5149",trigger:"change"}]});let f=m(),$=(s,e)=>{g(e),f.value=s,p.value=!0},x=m();Z().then(s=>{let e=[];s.data.data.list.map(n=>{let r={label:n.name,value:n.id};e.push(r)}),x.value=e});let j=async s=>{!s||await s.validate(async(e,n)=>{if(e){let r={id:t.value.id,name:t.value.name,start_day:Date.parse(t.value.start_day),end_day:Date.parse(t.value.end_day),start_time:Date.parse(t.value.start_time),control_id:t.value.controlArea,code:t.value.code,transfer:t.value.transfer,run:t.value.run,remarks:t.value.remarks};console.log(r);let v=await ue(r),E=await le(r);console.log("\u6DFB\u52A0\u8FD4\u56DE\u6570\u636E",v),v.status==200?(B({type:"success",message:"\u64CD\u4F5C\u6210\u529F"}),p.value=!1,b(),g(s)):E.status==200&&(B({type:"success",message:"\u64CD\u4F5C\u6210\u529F"}),p.value=!1,b(),g(s))}else console.log("error submit!",n)})};m();let L=(s,e,n)=>{console.log(s),console.log("\u7F16\u8F91\u8868\u5355\u6570\u636E\u56DE\u663E",e),f.value=n,console.log(f.value),t.value=e,p.value=!0};const g=s=>{!s||s.resetFields()},M=s=>{console.log("\u8868\u5355\u53D6\u6D88"),p.value=!1,g(s)},P=s=>{ne.confirm("\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u884C\u4EFB\u52A1\u4FE1\u606F\u5417?","\u63D0\u793A",{confirmButtonText:"\u5220\u9664",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{let e=await te(s);console.log(e),b(),B({type:"success",message:"\u5DF2\u6210\u529F\u5220\u9664"})}).catch(()=>{B({type:"info",message:"\u5DF2\u53D6\u6D88\u5220\u9664"})})},S=[{label:"\u5F00\u706F",value:"100"},{label:"\u5173\u706F",value:"200"},{label:"\u91CD\u542F",value:"300"},{label:"\u8C03\u5149",value:"400"}],I=[{label:"\u662F",value:"1"},{label:"\u5426",value:"2"}],J=()=>{console.log("\u53C9\u53F7\u5173\u95ED"),p.value=!1};return(s,e)=>{const n=d("el-button"),r=d("el-table-column"),v=d("el-tag"),E=d("el-table"),O=d("el-pagination"),A=d("el-input"),i=d("el-form-item"),w=d("el-date-picker"),G=d("el-time-select"),h=d("el-select-v2"),H=d("el-slider"),K=d("el-option"),Q=d("el-select"),W=d("el-form"),X=d("el-dialog");return c(),D("div",de,[V("div",ie,[u(n,{type:"default",size:"small",onClick:e[0]||(e[0]=l=>a($)("\u6DFB\u52A0",F.value)),style:{"background-color":"#fb808b",color:"#f0f0f0",margin:"10px 0"}},{default:o(()=>[pe]),_:1}),u(E,{data:a(k),border:"",height:"80%"},{default:o(()=>[u(r,{prop:"id",label:"id"}),u(r,{prop:"name",label:"\u4EFB\u52A1\u540D\u79F0"}),u(r,{prop:"start_day",label:"\u5F00\u59CB\u65E5\u671F"}),u(r,{prop:"end_day",label:"\u7ED3\u675F\u65E5\u671F"}),u(r,{prop:"start_time",label:"\u5F00\u59CB\u65F6\u95F4"}),u(r,{prop:"code_name",label:"\u6307\u4EE4"}),u(r,{prop:"transfer",label:"\u8C03\u5149\u503C"}),u(r,{prop:"remarks",label:"\u5907\u6CE8\u5185\u5BB9"}),u(r,{prop:"run",label:"\u662F\u5426\u5F00\u542F\u4EFB\u52A1"},{default:o(l=>[_(q(l.row.run==1?"\u662F":"\u5426"),1)]),_:1}),u(r,{prop:"control_id",label:"\u63A7\u5236\u5730\u533A"},{light_json:o(l=>[(c(!0),D(T,null,R(JSON.parse(l.row.control_id),(C,Y)=>(c(),y(v,{class:"ml-2",type:"error",key:Y,style:{"margin-bottom":"4px","margin-right":"2px"}},{default:o(()=>[_(q(C.name),1)]),_:2},1024))),128))]),_:1}),u(r,{prop:"operate",label:"\u64CD\u4F5C",width:"250"},{default:o(l=>[u(n,{type:"default",onClick:C=>a(L)(l.$index,l.row,"\u7F16\u8F91"),size:"small",style:{"background-color":"#fb808b",color:"#f0f0f0"}},{default:o(()=>[me]),_:2},1032,["onClick"]),u(n,{onClick:C=>P(l.row.id),type:"default",size:"small",style:{"background-color":"#fb808b",color:"#f0f0f0"}},{default:o(()=>[_e]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),V("div",ce,[u(O,{style:{"--el-color-primary":"#fb808b"},background:"",layout:"prev, pager, next",total:1})]),u(X,{modelValue:a(p),"onUpdate:modelValue":e[14]||(e[14]=l=>re(p)?p.value=l:p=l),title:a(f)+"\u4EFB\u52A1\u4FE1\u606F","before-close":J},{footer:o(()=>[V("span",Fe,[u(n,{type:"primary",onClick:e[11]||(e[11]=l=>a(j)(F.value))},{default:o(()=>[fe]),_:1}),a(f).value=="\u6DFB\u52A0"?(c(),y(n,{key:0,onClick:e[12]||(e[12]=l=>g(F.value))},{default:o(()=>[ge]),_:1})):U("",!0),u(n,{onClick:e[13]||(e[13]=l=>M(F.value))},{default:o(()=>[be]),_:1})])]),default:o(()=>[u(W,{ref_key:"ruleFormRef",ref:F,model:a(t),rules:a(N),"label-width":"120px",class:"demo-ruleForm",size:z.value,"status-icon":""},{default:o(()=>[u(i,{label:"\u4EFB\u52A1\u540D\u79F0",prop:"name"},{default:o(()=>[u(A,{style:{width:"400px"},modelValue:a(t).name,"onUpdate:modelValue":e[1]||(e[1]=l=>a(t).name=l)},null,8,["modelValue"])]),_:1}),u(i,{label:"\u5F00\u59CB\u65E5\u671F",required:""},{default:o(()=>[u(i,{prop:"start_day"},{default:o(()=>[u(w,{style:{width:"400px"},modelValue:a(t).start_day,"onUpdate:modelValue":e[2]||(e[2]=l=>a(t).start_day=l),type:"date",label:"Pick a date"},null,8,["modelValue"])]),_:1})]),_:1}),u(i,{label:"\u7ED3\u675F\u65E5\u671F",required:""},{default:o(()=>[u(i,{prop:"end_day"},{default:o(()=>[u(w,{style:{width:"400px"},modelValue:a(t).end_day,"onUpdate:modelValue":e[3]||(e[3]=l=>a(t).end_day=l),type:"date",label:"Pick a date"},null,8,["modelValue"])]),_:1})]),_:1}),u(i,{label:"\u5F00\u59CB\u65F6\u95F4",required:""},{default:o(()=>[u(i,{prop:"start_time"},{default:o(()=>[u(G,{style:{width:"400px"},modelValue:a(t).start_time,"onUpdate:modelValue":e[4]||(e[4]=l=>a(t).start_time=l),start:"00:00",step:"00:01",end:"23:59",placeholder:"\u8BF7\u9009\u62E9\u65F6\u95F4"},null,8,["modelValue"])]),_:1})]),_:1}),u(i,{label:"\u6307\u4EE4",prop:"code"},{default:o(()=>[u(h,{style:{width:"400px"},modelValue:a(t).code,"onUpdate:modelValue":e[5]||(e[5]=l=>a(t).code=l),placeholder:"\u8BF7\u586B\u5199\u6307\u4EE4",options:S},null,8,["modelValue"])]),_:1}),a(t).code=="400"?(c(),y(i,{key:0,label:"\u8C03\u5149",required:"",prop:"transfer",style:{width:"100%"}},{default:o(()=>[u(H,{style:{"padding-left":"10px"},modelValue:a(t).transfer,"onUpdate:modelValue":e[6]||(e[6]=l=>a(t).transfer=l),"show-input":"",max:255,onInput:e[7]||(e[7]=l=>a(t).transfer=l)},null,8,["modelValue"])]),_:1})):U("",!0),u(i,{label:"\u662F\u5426\u5F00\u542F\u4EFB\u52A1",prop:"run"},{default:o(()=>[u(h,{style:{width:"400px"},modelValue:a(t).run,"onUpdate:modelValue":e[8]||(e[8]=l=>a(t).run=l),placeholder:"\u8BF7\u586B\u5199",options:I},null,8,["modelValue"])]),_:1}),u(i,{label:"\u8981\u63A7\u5236\u7684\u533A\u57DF",prop:"controlArea"},{default:o(()=>[u(Q,{style:{width:"400px"},modelValue:a(t).controlArea,"onUpdate:modelValue":e[9]||(e[9]=l=>a(t).controlArea=l),multiple:"",placeholder:"\u8BF7\u586B\u5199"},{default:o(()=>[(c(!0),D(T,null,R(a(x),l=>(c(),y(K,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(i,{label:"\u5907\u6CE8\u5185\u5BB9",prop:"remarks"},{default:o(()=>[u(A,{style:{width:"400px"},modelValue:a(t).remarks,"onUpdate:modelValue":e[10]||(e[10]=l=>a(t).remarks=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules","size"])]),_:1},8,["modelValue","title"])])])}}});var Ee=ae(ve,[["__scopeId","data-v-1d304107"]]);export{Ee as default};
