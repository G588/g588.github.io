var q=Object.defineProperty;var k=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var w=(l,a,u)=>a in l?q(l,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):l[a]=u,E=(l,a)=>{for(var u in a||(a={}))z.call(a,u)&&w(l,u,a[u]);if(k)for(var u of k(a))I.call(a,u)&&w(l,u,a[u]);return l};import{_ as T,a as M}from"./lightOff.128895e5.js";import{M as N}from"./MTable.76dd600a.js";import{r as P,t as V,v as j,w as U,x as J,y as O}from"./index.c7d67714.js";import{_ as W,a as $,r as h,l as G,m as H,o as n,i,h as d,f as K,g,w as b,J as Q,E as m,q as r,v as X,x as Y}from"./index.349d9e8e.js";import"./MIcon.6c4988d5.js";var Z="/assets/onLine.e4bc9a90.png",ee="/assets/offLine.7ae4c158.png",te="/assets/malfunction.28c66d85.png";const v=l=>(X("data-v-78974041"),l=l(),Y(),l),ae={class:"controlManager page-container"},ue={class:"tableContainer"},se={key:0,style:{color:"green","font-weight":"600"}},oe=v(()=>d("img",{style:{height:"25px","margin-left":"13px"},src:Z,alt:""},null,-1)),le=[oe],ne={key:1,style:{color:"gray","font-weight":"600"}},ie=v(()=>d("img",{style:{height:"25px","margin-left":"13px"},src:ee,alt:""},null,-1)),re=[ie],ce={key:0,style:{color:"green","font-weight":"600"}},pe=v(()=>d("img",{style:{height:"25px","margin-left":"13px"},src:T,alt:""},null,-1)),ge=[pe],de={key:1,style:{color:"gray","font-weight":"600"}},_e=v(()=>d("img",{style:{height:"25px","margin-left":"13px"},src:M,alt:""},null,-1)),ye=[_e],he={key:2,style:{color:"red","font-weight":"600"}},me=v(()=>d("img",{style:{height:"25px","margin-left":"13px"},src:te,alt:""},null,-1)),ve=[me],fe={key:0,style:{color:"green","font-weight":"600"}},Be={key:1,style:{color:"gray","font-weight":"600"}},Ee=$({setup(l){const a=h(12),u=h(1),_=async(t,o)=>{let e=await P(t,o),s=await V();console.log("\u521D\u59CB\u5316\u83B7\u53D6\u6570\u636E:",e),e.data.code===200&&(p.deviceList=e.data.data,p.pageInfo.totalCount=s.data.data.num)};_(u.value,a.value);let f=h(),B=h();(async()=>{let t=await j();if(console.log("\u67E5\u770B\u6240\u6709\u7684\u4F20\u611F\u5668:",t),t.data.code===200){let o=[];t.data.data.human.map(s=>{let y={label:s.name,value:s.name};o.push(y)}),f.value=o;let e=[];t.data.data.illuminat.map(s=>{let y={label:s.name,value:s.name};e.push(y)}),B.value=e,console.log("\u4EBA\u4F53\u4F20\u611F\u5668\u6570\u636E:",f.value),console.log("\u5149\u7167\u4F20\u611F\u5668:",B.value)}})();let c=h(!1);const p=G({pageInfo:{},columns:[{prop:"name",key:"name",label:"\u540D\u79F0"},{prop:"number",key:"number",label:"\u7F16\u53F7"},{prop:"ip",key:"ip",label:"IP"},{prop:"light_status",key:"light_status",label:"\u72B6\u6001",isCustom:!0},{prop:"online",key:"online",label:"\u7F51\u7EDC",isCustom:!0},{prop:"on_power",key:"on_power",label:"\u5728\u7EBF\u529F\u7387/W"},{prop:"on_voltage",key:"on_voltage",label:"\u5728\u7EBF\u7535\u538B/V"},{prop:"on_electric",key:"on_electric",label:"\u5728\u7EBF\u7535\u6D41/mA"},{prop:"wify",key:"wify",label:"\u65E0\u7EBF\u8D26\u6237"},{prop:"password",key:"password",label:"\u65E0\u7EBF\u5BC6\u7801"},{prop:"bright_value",key:"bright_value",label:"\u4EAE\u5EA6",width:130},{prop:"photosensitive",key:"photosensitive",label:"\u5149\u654F\u503C"}],deviceList:[],dialogConfig:[{type:"text",label:"\u540D\u79F0",key:"name"},{type:"text",label:"\u7F16\u53F7",key:"number"},{type:"text",label:"\u8BBE\u5907IP",key:"ip"},{type:"number",label:"\u4EAE\u5EA6\u503C",key:"bright_value"},{type:"text",key:"wify",label:"\u65E0\u7EBF\u8D26\u6237"},{type:"text",key:"password",label:"\u65E0\u7EBF\u5BC6\u7801"},{type:"number",key:"photosensitive",label:"\u5149\u654F\u503C"},{type:"select",key:"human_sen",label:"\u4EBA\u4F53\u4F20\u611F\u5668",child:f},{type:"select",key:"illuminat",label:"\u5149\u7167\u4F20\u611F\u5668",child:B}],dialogData:{}}),D=async({rowIndex:t,tableData:o,opera:e,rowInfo:s})=>{switch(e){case"add":await F(),p.dialogData={},c.value=!0;break;case"edit":p.dialogData=E({},s),c.value=!0;break;case"show":p.dialogData=E({},s),c.value=!0;break;case"delete":Q.confirm(`\u4F60\u786E\u5B9A\u8981\u5220\u9664${o[t].name}\u8BBE\u5907\u5417?`,"\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",center:!0}).then(async()=>{console.log(s),(await U(s.id)).data.code===200?(m({type:"success",message:"\u5220\u9664\u6210\u529F"}),_(u.value,a.value)):m({type:"error",message:"\u5220\u9664\u5931\u8D25"})}).catch(y=>{});break}},C=async(t,o)=>{if(o.valid==!0)switch(t.operation){case"add":console.log("\u6DFB\u52A0\u8BBE\u5907\u8BE6\u7EC6\u6570\u636E",t.data);let e=await O(t.data);console.log("\u6DFB\u52A0\u8BBE\u5907\u8FD4\u56DE\u6570\u636E",e),e.data.status===200?(m({type:"success",message:"\u65B0\u589E\u6210\u529F"}),c.value=!1,_(u.value,a.value)):m({type:"error",message:"\u6DFB\u52A0\u5931\u8D25"});break;case"edit":console.log("\u7F16\u8F91\u8BBE\u5907\u8BE6\u7EC6\u6570\u636E",t.data),c.value=!1,m({type:"success",message:"\u7F16\u8F91\u6210\u529F"}),J(t.data).then(s=>{console.log(s)}).catch(s=>{console.log(s)});break}},F=async t=>{},{pageInfo:x,columns:A,deviceList:S,dialogConfig:L,dialogData:R}=H(p);return(t,o)=>(n(),i("div",ae,[d("div",ue,[K(N,{columns:g(A),"table-data":g(S),style:{"font-weight":"200"},pagination:{total:g(x).totalCount,pageSizes:[10,11,12,13]},pageSize:a.value,"onUpdate:pageSize":o[0]||(o[0]=e=>a.value=e),currentPage:u.value,"onUpdate:currentPage":o[1]||(o[1]=e=>u.value=e),dialogConfig:g(L),rules:t.rules,"dialog-status":g(c),"dialog-data":g(R),tableTitle:"\u8BBE\u5907",onTbDialogSureClick:C,onOperaButtonClick:D,onSelectChange:F,onCurrentPageChange:_,onPageSizeChange:_},{online:b(e=>[e.row.online==1?(n(),i("span",se,le)):r("",!0),e.row.online==2?(n(),i("span",ne,re)):r("",!0)]),light_status:b(e=>[e.row.light_status==1?(n(),i("span",ce,ge)):r("",!0),e.row.light_status==0?(n(),i("span",de,ye)):r("",!0),e.row.light_status==2?(n(),i("span",he,ve)):r("",!0)]),person_on:b(e=>[e.row.person_on==1?(n(),i("span",fe,"\u5F00\u542F")):r("",!0),e.row.person_on==0?(n(),i("span",Be,"\u5173\u95ED")):r("",!0)]),_:1},8,["columns","table-data","pagination","pageSize","currentPage","dialogConfig","rules","dialog-status","dialog-data"])])]))}});var Ae=W(Ee,[["__scopeId","data-v-78974041"]]);export{Ae as default};
