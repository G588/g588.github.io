var _=Object.defineProperty;var D=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var v=(s,e,a)=>e in s?_(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,g=(s,e)=>{for(var a in e||(e={}))B.call(e,a)&&v(s,a,e[a]);if(D)for(var a of D(e))M.call(e,a)&&v(s,a,e[a]);return s};import{M as w}from"./MTable.76dd600a.js";import{m as A,n as x,o as S,p as L,q as T,D as q}from"./index.c7d67714.js";import{_ as R,a as z,r as p,l as P,m as I,o as N,i as U,h as V,f as Y,g as o,w as J,J as O,E as d,k as $,t as j}from"./index.349d9e8e.js";import"./MIcon.6c4988d5.js";const G={class:"menuManager page-container"},H={class:"tableContainer"},K=z({setup(s){let e=p(!1);const a=P({pageInfo:{},columns:[{prop:"id",key:"id",label:"ID"},{prop:"name",key:"name",label:"\u83DC\u5355\u540D\u79F0",width:140},{prop:"pid",key:"pid",label:"\u4E0A\u7EA7id"},{prop:"grade",key:"grade",label:"\u83DC\u5355\u5C42\u7EA7"},{prop:"icon",key:"icon",label:"\u83DC\u5355\u56FE\u6807"},{prop:"time",key:"time",label:"\u521B\u5EFA\u65F6\u95F4",width:170,isCustom:!0}],menuList:[],showMenuList:[],dialogConfig:[{type:"text",label:"\u83DC\u5355\u540D\u79F0",key:"name"},{type:"select",label:"\u4E0A\u7EA7id",key:"pid",child:[{label:"\u7CFB\u7EDF\u7BA1\u7406",value:1}]},{type:"select",label:"\u83DC\u5355\u5C42\u7EA7",key:"grade",child:[{label:"\u4E00\u7EA7\u83DC\u5355",value:1},{label:"\u4E8C\u7EA7\u83DC\u5355",value:2}]},{type:"text",label:"\u8DF3\u8F6C\u8DEF\u5F84",key:"url"},{type:"text",label:"\u83DC\u5355\u56FE\u6807",key:"icon"},{type:"select",label:"\u662F\u5426\u663E\u793A\u5B50\u83DC\u5355",key:"isShowChild",child:[{label:"\u662F",value:1},{label:"\u5426",value:2}]}],dialogData:{}}),n=p(6),i=p(1),r=async(t,l)=>{let u=await A(t,l),c=await x();console.log(c),u.code===200&&(a.menuList=u.data.column,a.pageInfo.totalCount=c.data.num)};r(i.value,n.value);const y=async({rowIndex:t,tableData:l,opera:u,rowInfo:c})=>{switch(u){case"add":await m(),a.dialogData={},e.value=!0;break;case"edit":a.dialogData=g({},c),e.value=!0;break;case"show":a.dialogData=g({},c),e.value=!0;break;case"delete":O.confirm(`\u4F60\u786E\u5B9A\u8981\u5220\u9664${l[t].name}\u83DC\u5355\u5417?`,"\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",center:!0}).then(async()=>{let C=await S(c.id);d({type:"success",message:C.message}),r(i.value,n.value)}).catch(C=>{});break}},b=async t=>{switch(t.operation){case"add":(await T(t.data)).code===200?(d({type:"success",message:"\u65B0\u589E\u6210\u529F"}),e.value=!1,r(i.value,n.value)):d({type:"error",message:"\u6DFB\u52A0\u5931\u8D25"});break;case"edit":(await L(t.data)).code===200?(d({type:"success",message:"\u66F4\u65B0\u6210\u529F"}),e.value=!1,r(i.value,n.value)):d({type:"error",message:"\u6DFB\u52A0\u5931\u8D25"});break}e.value=!1},m=async t=>{},{pageInfo:f,columns:k,menuList:E,showMenuList:Q,dialogConfig:h,dialogData:F}=I(a);return(t,l)=>(N(),U("div",G,[V("div",H,[Y(w,{columns:o(k),"table-data":o(E),pagination:{total:o(f).totalCount},pageSize:n.value,"onUpdate:pageSize":l[0]||(l[0]=u=>n.value=u),currentPage:i.value,"onUpdate:currentPage":l[1]||(l[1]=u=>i.value=u),dialogConfig:o(h),"dialog-status":o(e),"dialog-data":o(F),tableTitle:"\u83DC\u5355",onTbDialogSureClick:b,onOperaButtonClick:y,onSelectChange:m,onCurrentPageChange:r,onPageSizeChange:r},{time:J(u=>[$(j(o(q).formatTimeStamp(u.row.time,"YY-MM-DD hh:mm:ss")),1)]),_:1},8,["columns","table-data","pagination","pageSize","currentPage","dialogConfig","dialog-status","dialog-data"])])]))}});var ue=R(K,[["__scopeId","data-v-9953a762"]]);export{ue as default};
