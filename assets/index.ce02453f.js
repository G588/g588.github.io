var w=Object.defineProperty;var y=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var v=(l,e,a)=>e in l?w(l,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[e]=a,p=(l,e)=>{for(var a in e||(e={}))S.call(e,a)&&v(l,a,e[a]);if(y)for(var a of y(e))N.call(e,a)&&v(l,a,e[a]);return l};import{M as T}from"./MTable.76dd600a.js";import{a3 as M,a4 as z,a5 as A,a6 as L,a7 as R,D as q}from"./index.c7d67714.js";import{_ as I,a as U,r as g,l as P,m as V,o as Y,i as J,h as O,f as $,g as i,w as _,J as j,E as c,k as f,t as k}from"./index.349d9e8e.js";import"./MIcon.6c4988d5.js";const G={class:"nodeManager page-container"},H={class:"tableContainer"},K=U({setup(l){let e=g(!1);const a=P({pageInfo:{},columns:[{prop:"id",key:"id",label:"ID"},{prop:"name",key:"name",label:"\u8282\u70B9\u540D\u79F0"},{prop:"uid",key:"uid",label:"\u8282\u70B9UID"},{prop:"group",key:"group",label:"\u5206\u7EC4"},{prop:"number",key:"number",label:"\u8BBE\u5907\u7F16\u7801"},{prop:"loop_id",key:"loop_id",label:"\u56DE\u8DEFid"},{prop:"is_steal",key:"is_steal",label:"\u662F\u5426\u9632\u76D7",isCustom:!0},{prop:"time",key:"time",label:"\u521B\u5EFA\u65F6\u95F4",isCustom:!0}],nodeList:[],dialogConfig:[{type:"text",label:"\u6570\u636E\u6570\u91CF",key:"size"},{type:"number",label:"\u8282\u70B9UID",key:"uid"},{type:"select",label:"\u5206\u7EC4",key:"group",child:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4}]},{type:"text",label:"\u8BBE\u5907\u7F16\u7801",key:"number"},{type:"number",label:"\u56DE\u8DEFid",key:"loop_id"},{type:"number",label:"\u662F\u5426\u9632\u76D7",key:"is_steal"}],dialogData:{}}),n=g(6),r=g(1),o=async(u,s)=>{try{let t=await M(u,s),d=await z();console.log(t),t.data.code===200&&(a.nodeList=t.data.data.list,a.pageInfo.totalCount=d.data.num)}catch{}};o(r.value,n.value),console.log(o);const D=async({rowIndex:u,tableData:s,opera:t,rowInfo:d})=>{switch(t){case"add":await m(),a.dialogData={},e.value=!0;break;case"edit":a.dialogData=p({},d),e.value=!0;break;case"show":a.dialogData=p({},d),e.value=!0;break;case"delete":j.confirm(`\u4F60\u786E\u5B9A\u8981\u5220\u9664${s[u].name}\u8282\u70B9\u5417?`,"\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",center:!0}).then(async()=>{let b=await A(d.id);c({type:"success",message:b.message}),o(r.value,n.value)}).catch(b=>{});break}},B=async u=>{switch(u.operation){case"add":(await R(u.data)).code===200?(c({type:"success",message:"\u65B0\u589E\u6210\u529F"}),e.value=!1,o(r.value,n.value)):c({type:"error",message:"\u6DFB\u52A0\u5931\u8D25"});break;case"edit":let t=await L(u.data);t.code===200?(c({type:"success",message:t.message}),e.value=!1,o(r.value,n.value)):c({type:"error",message:"\u6DFB\u52A0\u5931\u8D25"});break}e.value=!1},m=async u=>{},{pageInfo:C,columns:E,nodeList:F,dialogConfig:h,dialogData:x}=V(a);return(u,s)=>(Y(),J("div",G,[O("div",H,[$(T,{columns:i(E),"table-data":i(F),pagination:{total:i(C).totalCount},pageSize:n.value,"onUpdate:pageSize":s[0]||(s[0]=t=>n.value=t),currentPage:r.value,"onUpdate:currentPage":s[1]||(s[1]=t=>r.value=t),dialogConfig:i(h),"dialog-status":i(e),"dialog-data":i(x),tableTitle:"\u8282\u70B9",onTbDialogSureClick:B,onOperaButtonClick:D,onSelectChange:m,onCurrentPageChange:o,onPageSizeChange:o},{time:_(t=>[f(k(i(q).formatTimeStamp(t.row.time,"YY-MM-DD hh:mm:ss")),1)]),is_steal:_(t=>[f(k(t.row.is_steal==1?"\u662F":"\u5426"),1)]),_:1},8,["columns","table-data","pagination","pageSize","currentPage","dialogConfig","dialog-status","dialog-data"])])]))}});var ae=I(K,[["__scopeId","data-v-8f50822c"]]);export{ae as default};
