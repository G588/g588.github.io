var pe=Object.defineProperty;var W=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var X=(l,c,o)=>c in l?pe(l,c,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[c]=o,Y=(l,c)=>{for(var o in c||(c={}))ce.call(c,o)&&X(l,o,c[o]);if(W)for(var o of W(c))ye.call(c,o)&&X(l,o,c[o]);return l};import{_ as ae,a as le,l as ge,r as T,c as k,o as t,e as i,w as n,h as z,f as g,q as D,i as w,j as $,F as m,g as d,M as q,k as V,t as H,N as fe,v as be,x as ke,E as he,C as P,O as Z,p as _e,n as ve}from"./index.349d9e8e.js";import{s as ee}from"./index.c7d67714.js";import{M as A}from"./MIcon.6c4988d5.js";const te=l=>(be("data-v-53d3f3a0"),l=l(),ke(),l),Ce=["src"],we=V("user"),me=["src"],Se={class:"el-upload-list__item-actions"},xe=["onClick"],ze=["onClick"],De=te(()=>z("div",{id:"toolbar-container",style:{border:"solid 1px #ededed"}},null,-1)),Ve=te(()=>z("div",{id:"editor-container",style:{border:"solid 1px #ededed",height:"200px"}},null,-1)),Fe={class:"dialog-footer"},$e=V("\u53D6\u6D88"),Te=V("\u786E\u5B9A"),Be=le({props:{dialogStatus:{type:Boolean},title:null,config:null,data:null,operation:null,uploadConfig:null,rules:null},emits:["update:dialogStatus","submitInfo","selectChange"],setup(l,{emit:c}){const o=l;console.log(o);let a=ge(o);console.log(a);const B=T(),I=y=>{c("update:dialogStatus",y)},O=async()=>{var b,p;let y=0;(b=a.config)==null||b.forEach(s=>{s.type==="image"&&(a.data[s.key]=a.data[s.key][0].url||""),s.type==="images"&&(a.data[s.key]=a.data[s.key].map(r=>r.url)),s.type==="tree"&&(a.data[s.key]=h(y),y++)}),await((p=B.value)==null?void 0:p.validate((s,r)=>{c("submitInfo",a,{valid:s,fields:r})}))},E=T(!0),M=()=>(E.value=!1,!0),K=(y,b,p,s,r)=>{var L;console.log(r);let S=(L=a.config)==null?void 0:L.find(N=>N.key===r);y.code===200&&((S==null?void 0:S.type)==="image"||(S==null?void 0:S.type)==="avatar"?a.data[r]=[{url:ee+y.data}]:a.data[r].push({url:ee+y.data})),he({type:"success",message:y.message})},F=(y,b,p)=>{},j=(y,b)=>{let p=a.data[b].findIndex(s=>s.url!==y.url);a.data[b].splice(p,1)};T([]);let f=T();const h=y=>f.value[y].getCheckedKeys(!1),C=(y,b)=>{c("selectChange",y,b)},U=y=>{};return(y,b)=>{const p=k("el-option"),s=k("el-select"),r=k("el-form-item"),S=k("el-table-column"),L=k("el-table"),N=k("el-avatar"),R=k("el-icon"),G=k("el-upload"),J=k("el-image"),oe=k("el-color-picker"),ne=k("el-input"),de=k("el-form"),Q=k("el-button"),se=k("el-dialog");return t(),i(se,{modelValue:o.dialogStatus,"onUpdate:modelValue":b[1]||(b[1]=e=>o.dialogStatus=e),title:l.title,onClose:b[2]||(b[2]=e=>I(!1))},{footer:n(()=>[z("span",Fe,[g(Q,{onClick:b[0]||(b[0]=e=>I(!1)),style:{"background-color":"gray",border:"none",color:"#F0F0F0"}},{default:n(()=>[$e]),_:1}),o.operation!=="show"?(t(),i(Q,{key:0,type:"primary",onClick:O,style:{"background-color":"#FB808B",border:"none"}},{default:n(()=>[Te]),_:1})):D("",!0)])]),default:n(()=>[g(de,{model:d(a).data,rules:l.rules,ref_key:"ruleFormRef",ref:B},{default:n(()=>[(t(!0),w(m,null,$(d(a).config,(e,re)=>(t(),w(m,{key:re},[e.type==="select"?(t(),i(r,{key:0,label:e.label,"label-width":100,prop:e.key},{default:n(()=>[g(s,{modelValue:d(a).data[e.key],"onUpdate:modelValue":u=>d(a).data[e.key]=u,placeholder:"\u8BF7\u9009\u62E9"+e.label,disabled:e.disabled?!0:d(a).operation==="show",onChange:u=>C(u,e.key)},{default:n(()=>[(t(!0),w(m,null,$(e.child,(u,_)=>(t(),i(p,{key:_,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","disabled","onChange"])]),_:2},1032,["label","prop"])):e.type==="selectMultiple"?(t(),i(r,{key:1,label:e.label,"label-width":100,prop:e.key},{default:n(()=>[g(s,{modelValue:d(a).data[e.key],"onUpdate:modelValue":u=>d(a).data[e.key]=u,multiple:"",placeholder:"\u8BF7\u9009\u62E9"+e.label,disabled:e.disabled?!0:d(a).operation==="show"},{default:n(()=>[(t(!0),w(m,null,$(e.child,(u,_)=>(t(),i(p,{key:_,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),_:2},1032,["label","prop"])):e.type==="list"?(t(),i(r,{key:2,label:e.label,"label-width":100,prop:e.key},{default:n(()=>[g(L,{data:d(a).data[e.key],style:{width:"100%"},border:""},{default:n(()=>[(t(!0),w(m,null,$(e.list,(u,_)=>(t(),i(S,{key:_,prop:u.key,label:u.label,width:u.width},q({_:2},[u.type&&u.type==="image"?{name:"default",fn:n(v=>[z("img",{src:v.row[u.key],alt:"",width:"100",height:"100"},null,8,Ce)])}:void 0]),1032,["prop","label","width"]))),128))]),_:2},1032,["data"])]),_:2},1032,["label","prop"])):e.type==="avatar"?(t(),i(r,{key:3,label:e.label,"label-width":100,prop:e.key},{default:n(()=>[d(a).operation==="show"?(t(),i(N,{key:0,size:"medium",shape:"circle",src:d(a).data[e.key]},{default:n(()=>[we]),_:2},1032,["src"])):D("",!0),d(a).operation!=="show"?(t(),i(G,{key:1,class:"avatar-uploader","show-file-list":!1,"auto-upload":!0,data:{name:l.uploadConfig.uploadDataKey},action:l.uploadConfig.uploadUrl,headers:l.uploadConfig.headers,multiple:!0,"on-success":(u,_,v,x)=>K(u,_,v,x,e.key),"on-error":F},{default:n(()=>[d(a).data[e.key]&&d(a).data[e.key]!==""&&E.value?(t(),i(N,{key:0,src:d(a).data[e.key][0].url,onError:M},null,8,["src"])):(t(),i(R,{key:1,class:"avatar-uploader-icon"},{default:n(()=>[g(A,{name:"add1"})]),_:1}))]),_:2},1032,["data","action","headers","on-success"])):D("",!0)]),_:2},1032,["label","prop"])):e.type==="image"||e.type==="images"?(t(),i(r,{key:4,label:e.label,"label-width":100,prop:e.key},{default:n(()=>{var u,_;return[d(a).data[e.key]instanceof Array&&d(a).operation==="show"?(t(!0),w(m,{key:0},$(d(a).data[e.key],(v,x)=>(t(),i(J,{key:x,"preview-src-list":d(a).data[e.key],src:v,fit:"fill",lazy:!0,style:{width:"160px",height:"100px","margin-right":"10px"}},{default:n(()=>[V(H(d(a).data[e.key]),1)]),_:2},1032,["preview-src-list","src"]))),128)):D("",!0),typeof d(a).data[e.key]=="string"&&d(a).operation==="show"?(t(),i(J,{key:1,style:{width:"100px",height:"100px"},src:d(a).data[e.key],fit:"fill",lazy:!0,"preview-src-list":[d(a).data[e.key]]},null,8,["src","preview-src-list"])):D("",!0),d(a).operation!=="show"?(t(),i(G,{key:2,data:{name:(u=l.uploadConfig)==null?void 0:u.uploadDataKey},action:l.uploadConfig.uploadUrl,headers:(_=l.uploadConfig)==null?void 0:_.headers,"file-list":d(a).data[e.key],"list-type":"picture-card",limit:e.type==="image"?1:6,"on-success":(v,x,ue,ie)=>K(v,x,ue,ie,e.key),"on-error":F},{default:n(()=>[g(R,null,{default:n(()=>[g(A,{name:"add1"})]),_:1})]),file:n(({file:v})=>[z("img",{style:{width:"100%",height:"100%"},class:"el-upload-list__item-thumbnail",src:v.url,alt:""},null,8,me),z("span",Se,[z("span",{class:"el-upload-list__item-preview",onClick:x=>U()},[g(R,null,{default:n(()=>[g(A,{name:"add1"})]),_:1})],8,xe),z("span",{class:"el-upload-list__item-delete",onClick:x=>j(v,e.key)},[g(R,null,{default:n(()=>[g(A,{name:"add1"})]),_:1})],8,ze)])]),_:2},1032,["data","action","headers","file-list","limit","on-success"])):D("",!0)]}),_:2},1032,["label","prop"])):e.type==="color"?(t(),i(r,{key:5,label:e.label,"label-width":100,prop:e.key},{default:n(()=>[g(oe,{modelValue:d(a).data[e.key],"onUpdate:modelValue":u=>d(a).data[e.key]=u,size:"large",disabled:e.disabled?!0:d(a).operation==="show"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["label","prop"])):e.type==="tree"?(t(),i(r,{key:6,label:e.label,"label-width":100,prop:e.key},{default:n(()=>{var u,_,v,x;return[g(d(fe),{data:(u=e.options)==null?void 0:u.treeData,ref_for:!0,ref_key:"tree",ref:f,"show-checkbox":d(a).operation!=="show","node-key":((v=(_=e.options)==null?void 0:_.treeProp)==null?void 0:v.value)||"id","default-checked-keys":d(a).data[e.key],props:((x=e.options)==null?void 0:x.treeProp)||{label:"title",children:"children",disabled:d(a).operation==="show"?"true":"false"}},null,8,["data","show-checkbox","node-key","default-checked-keys","props"])]}),_:2},1032,["label","prop"])):e.type==="richText"?(t(),i(r,{key:7,label:e.label,"label-width":100,prop:e.key},{default:n(()=>[De,Ve]),_:2},1032,["label","prop"])):(t(),i(r,{key:8,label:e.label,"label-width":100,prop:e.key},{default:n(()=>[g(ne,{modelValue:d(a).data[e.key],"onUpdate:modelValue":u=>d(a).data[e.key]=u,autocomplete:"off",type:e.type,disabled:e.disabled?!0:d(a).operation==="show"},null,8,["modelValue","onUpdate:modelValue","type","disabled"])]),_:2},1032,["label","prop"]))],64))),128))]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});var Ee=ae(Be,[["__scopeId","data-v-53d3f3a0"]]);const Ue={class:"tableContainer"},Pe={class:"header"},Le=V(" \u65B0\u589E "),Ie={class:"Pagination"},Me=le({props:{tableData:null,dialogStatus:{type:Boolean},columns:null,pagination:null,dialogConfig:null,dialogData:null,tableTitle:null,operaList:null,uploadConfig:null,rules:null},emits:["pageSizeChange","currentPageChange","update:currentPage","update:pageSize","tbDialogSureClick","operaButtonClick","selectChange"],setup(l,{emit:c}){const o=l,a=T(1),B=T(o.pagination.pageSizes?o.pagination.pageSizes[0]:6),I=f=>{B.value=f,c("update:pageSize",f),c("pageSizeChange",a.value,f)},O=f=>{a.value=f,c("update:currentPage",f),c("currentPageChange",f,B.value)},E=T(""),M=T(""),K=async(f,h)=>{await c("tbDialogSureClick",f,h)},F=(f,h,C,U)=>{switch(M.value=C,c("operaButtonClick",{rowIndex:f,tableData:h,opera:C,rowInfo:U,dialogStatus:o.dialogStatus}),C){case"show":E.value=o.tableTitle+"\u4FE1\u606F";break;case"edit":E.value="\u7F16\u8F91"+o.tableTitle+"\u4FE1\u606F";break;case"add":E.value="\u65B0\u589E"+o.tableTitle+"\u4FE1\u606F";break}},j=(f,h)=>{c("selectChange",f,h)};return(f,h)=>{const C=k("el-button"),U=k("el-table-column"),y=k("el-table"),b=k("el-pagination");return t(),w("div",Ue,[z("div",Pe,[o.operaList?(t(!0),w(m,{key:0},$(o.operaList,(p,s)=>(t(),w(m,{key:s},[p.renderPostation==="Header"?(t(),i(C,{key:0,style:{"margin-right":"20px"},size:"small",type:p.btnType,onClick:P(r=>F(0,o.tableData,p.opera,{}),["prevent"])},{default:n(()=>[V(H(p.btnText),1)]),_:2},1032,["type","onClick"])):D("",!0)],64))),128)):(t(),i(C,{key:1,style:{"margin-right":"20px","background-color":"#fb808b",color:"#f0f0f0",border:"#fb808b solid 1px"},size:"small",onClick:h[0]||(h[0]=P(p=>F(0,o.tableData,"add",{}),["prevent"]))},{default:n(()=>[Le]),_:1})),Z(f.$slots,"headerSelect",{},void 0,!0)]),g(y,{data:o.tableData,border:"","default-expand-all":"","row-key":"id",height:"80%"},{default:n(()=>{var p;return[(t(!0),w(m,null,$(o.columns,s=>(t(),i(U,{prop:s.prop,key:s.key,label:s.label,width:s.width},q({_:2},[s.isCustom?{name:"default",fn:n(r=>[Z(f.$slots,s.key,{row:Y({index:r.$index},r.row)},void 0,!0)])}:void 0]),1032,["prop","label","width"]))),128)),!o.operaList||o.operaList&&((p=o.operaList)==null?void 0:p.length)>0?(t(),i(U,{key:0,label:"\u64CD\u4F5C",width:"200",fixed:"right","class-name":"opera"},q({_:2},[o.operaList?{name:"default",fn:n(s=>[(t(!0),w(m,null,$(o.operaList,(r,S)=>(t(),w(m,{key:S},[r.renderPostation==="TableOperaCell"?(t(),i(C,{key:0,size:"small",type:r.btnType,style:ve({backgroundColor:r.bgColor,color:r.color}),onClick:P(L=>F(s.$index,o.tableData,r.opera,s.row),["prevent"])},{default:n(()=>[V(H(r.btnText),1)]),_:2},1032,["type","style","onClick"])):D("",!0)],64))),128))])}:{name:"default",fn:n(s=>[g(C,{type:"default",size:"small",style:{"background-color":"#fb808b",color:"#f0f0f0"},onClick:P(r=>F(s.$index,o.tableData,"show",s.row),["prevent"])},{default:n(()=>[V(" \u67E5\u770B ")]),_:2},1032,["onClick"]),g(C,{type:"default",size:"small",style:{"background-color":"#fb808b",color:"#f0f0f0"},onClick:P(r=>F(s.$index,o.tableData,"edit",s.row),["prevent"])},{default:n(()=>[V(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),g(C,{type:"default",size:"small",style:{"background-color":"#fb808b",color:"#f0f0f0"},onClick:P(r=>F(s.$index,o.tableData,"delete",s.row),["prevent"])},{default:n(()=>[V(" \u5220\u9664 ")]),_:2},1032,["onClick"])])}]),1024)):D("",!0)]}),_:3},8,["data"]),z("div",Ie,[g(b,{style:{"--el-color-primary":"#fb808b"},currentPage:a.value,"onUpdate:currentPage":h[1]||(h[1]=p=>a.value=p),"page-size":B.value,"onUpdate:page-size":h[2]||(h[2]=p=>B.value=p),"page-sizes":l.pagination.pageSizes?l.pagination.pageSizes:[2,6,7,8,9,10],small:l.pagination.small?l.pagination.small:!1,disabled:l.pagination.disabled?l.pagination.disabled:!1,background:l.pagination.background?l.pagination.background:!0,layout:l.pagination.layout?l.pagination.layout:" sizes, prev, pager, next",total:l.pagination.total||6,onSizeChange:I,onCurrentChange:O},null,8,["currentPage","page-size","page-sizes","small","disabled","background","layout","total"])]),l.dialogStatus?(t(),i(Ee,{key:0,dialogStatus:l.dialogStatus,"onUpdate:dialogStatus":h[3]||(h[3]=p=>_e(dialogStatus)?dialogStatus.value=p:null),title:E.value,config:l.dialogConfig,data:l.dialogData,operation:M.value,onSubmitInfo:K,onSelectChange:j,rules:l.rules||[],uploadConfig:l.uploadConfig},null,8,["dialogStatus","title","config","data","operation","rules","uploadConfig"])):D("",!0)])}}});var Oe=ae(Me,[["__scopeId","data-v-0f303044"]]);export{Oe as M};
